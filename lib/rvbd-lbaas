# lib/rvbd-lbaas
# Functions to control the configuration and operation of the Riverbed LBaaS
# <do not include this template file in ``stack.sh``!>

# Dependencies:
# ``functions`` file
# ``SERVICE_{TENANT_NAME|PASSWORD}`` must be defined
# <list other global vars that are assumed to be defined>

# ``stack.sh`` calls the entry points in this order:
#
# install_rvbd-lbaas
# configure_rvbd-lbaas
# init_rvbd-lbaas
# start_rvbd-lbaas
# stop_rvbd-lbaas
# cleanup_rvbd-lbaas

# Print the commands being run so that we can see the command that triggers
# an error.  It is also useful for following along as the install occurs.
set -o xtrace


# Defaults
# --------

# <define global variables here that belong to this project>

# Set up default directories
RVBD_LBAAS_DIR=$DEST/rvbd-lbaas
RVBD_LBAAS_CONF_DIR=/etc/rvbd-lbaas


# Entry Points
# ------------

# cleanup_rvbd-lbaas() - Remove residual data files, anything left over from previous
# runs that a clean run would need to clean up
function cleanup_rvbd-lbaas() {
    # kill instances (nova)
    # delete image files (glance)
    # This function intentionally left blank
    :
}

# configure_rvbd-lbaas() - Set config files, create data dirs, etc
function configure_rvbd-lbaas() {
    # sudo python setup.py deploy
    # iniset $LVBD_LBAAS_CONF ...
    # This function intentionally left blank
    :
}

# init_rvbd-lbaas() - Initialize databases, etc.
function init_rvbd-lbaas() {
    # clean up from previous (possibly aborted) runs
    # create required data files
    :
}

# install_rvbd-lbaas() - Collect source and prepare
function install_rvbd-lbaas() {
    # git clone xxx
    :
}

# start_rvbd-lbaas() - Start running processes, including screen
function start_rvbd-lbaas() {
    # screen_it rvbd-lbaas "cd $RVBD_LBAAS_DIR && $RVBD_LBAAS_DIR/bin/rvbd-lbaas-bin"
    :
}

# stop_rvbd-lbaas() - Stop running processes (non-screen)
function stop_rvbd-lbaas() {
    # FIXME(dtroyer): stop only our screen screen window?
    :
}
